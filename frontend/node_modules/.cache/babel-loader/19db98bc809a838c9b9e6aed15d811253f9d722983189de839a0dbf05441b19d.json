{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\inz15\\\\Desktop\\\\comp\\\\comp\\\\frontend\\\\src\\\\webpages\\\\JobDetails.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport api from '../api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst JobDetails = () => {\n  _s();\n  const {\n    jobId\n  } = useParams();\n  const [job, setJob] = useState({});\n  const [isStaff, setIsStaff] = useState(false);\n  const [applicantDetails, setApplicantDetails] = useState([]);\n  const [applicantEmails, setApplicantEmails] = useState([]);\n  useEffect(() => {\n    getApplicantDetails();\n  }, []);\n  const getApplicantDetails = async () => {\n    api.get(\"/applicant/applicant/list/\").then(res => res.data).then(data => {\n      setApplicantDetails(data);\n      console.log(data);\n    }).catch(err => alert(err));\n  };\n  useEffect(() => {\n    const retrievestaffstatus = async () => {\n      const token = localStorage.getItem(\"access_token\");\n      if (token) {\n        const response = await fetch(\"/applicant/retrieve-staff-status\", {\n          method: \"GET\",\n          headers: {\n            Authorization: `Bearer ${token}`,\n            \"Content-Type\": \"application/json\"\n          }\n        });\n        if (response.ok) {\n          const data = await response.json();\n          setIsStaff(data.is_staff);\n        }\n      }\n    };\n    retrievestaffstatus();\n  }, []);\n  useEffect(() => {\n    if (jobId) {\n      getJob();\n    }\n  }, [jobId]);\n  useEffect(() => {\n    if (job.jobprimaryskill) {\n      postPrimarySkill(job.jobprimaryskill);\n    }\n  }, [job.jobprimaryskill]);\n  const getJob = () => {\n    fetch(`/Jobs/List/${jobId}`).then(response => response.json()).then(data => {\n      setJob(data);\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n  const postPrimarySkill = primarySkill => {\n    fetch('/applicant/skills/', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        skill: primarySkill\n      })\n    }).then(response => {\n      if (!response.ok) {\n        return response.json().then(err => {\n          throw err;\n        });\n      }\n      return response.json();\n    }).then(data => {\n      setApplicantEmails(data.emails);\n    }).catch(error => {\n      console.error('Error:', error);\n      alert('Failed to fetch applicant emails. Please try again.');\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-header\",\n      children: [job.jobtitle, \" - Job at \", job.companyname]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-body\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"card-text\",\n        children: [\"Job Type: \", job.jobtype]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"card-text\",\n        children: [\"Salary: \\xA3\", job.salary]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"card-text\",\n        children: [\"Job Description: \", job.jobdescription]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"card-text\",\n        children: [\"Location: \", job.location]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"card-text\",\n        children: [\"Date listing was posted: \", job.dateposted]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"card-text\",\n        children: [\"Deadline to apply: \", job.deadline]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"card-text\",\n        children: [\"Sought skills: \", job.jobprimaryskill, \", \", job.jobsecondaryskill]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"applicants\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          children: [\"Applicants with \", job.jobprimaryskill, \" skill:\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: applicantEmails.map(email => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: email\n          }, email, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 5\n  }, this);\n};\n_s(JobDetails, \"ofyGbbPO2S0TB5mbzaTAchrfe1U=\", false, function () {\n  return [useParams];\n});\n_c = JobDetails;\nexport default JobDetails;\nvar _c;\n$RefreshReg$(_c, \"JobDetails\");","map":{"version":3,"names":["React","useEffect","useState","useParams","api","jsxDEV","_jsxDEV","JobDetails","_s","jobId","job","setJob","isStaff","setIsStaff","applicantDetails","setApplicantDetails","applicantEmails","setApplicantEmails","getApplicantDetails","get","then","res","data","console","log","catch","err","alert","retrievestaffstatus","token","localStorage","getItem","response","fetch","method","headers","Authorization","ok","json","is_staff","getJob","jobprimaryskill","postPrimarySkill","error","primarySkill","body","JSON","stringify","skill","emails","className","children","jobtitle","companyname","fileName","_jsxFileName","lineNumber","columnNumber","jobtype","salary","jobdescription","location","dateposted","deadline","jobsecondaryskill","map","email","_c","$RefreshReg$"],"sources":["C:/Users/inz15/Desktop/comp/comp/frontend/src/webpages/JobDetails.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport api from '../api';\r\n\r\nconst JobDetails = () => {\r\n  const { jobId } = useParams();\r\n  const [job, setJob] = useState({});\r\n  const [isStaff, setIsStaff] = useState(false);\r\n  const [applicantDetails, setApplicantDetails] = useState([]);\r\n  const [applicantEmails, setApplicantEmails] = useState([]);\r\n\r\n  useEffect(() => {\r\n    getApplicantDetails();\r\n  }, []);\r\n\r\n  const getApplicantDetails = async () => {\r\n    api\r\n      .get(\"/applicant/applicant/list/\")\r\n      .then((res) => res.data)\r\n      .then((data) => {\r\n        setApplicantDetails(data);\r\n        console.log(data);\r\n      })\r\n      .catch((err) => alert(err));\r\n  };\r\n\r\n  useEffect(() => {\r\n    const retrievestaffstatus = async () => {\r\n      const token = localStorage.getItem(\"access_token\");\r\n      if (token) {\r\n        const response = await fetch(\"/applicant/retrieve-staff-status\", {\r\n          method: \"GET\",\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        });\r\n\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          setIsStaff(data.is_staff);\r\n        }\r\n      }\r\n    }\r\n    retrievestaffstatus();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (jobId) {\r\n      getJob();\r\n    }\r\n  }, [jobId]);\r\n\r\n  useEffect(() => {\r\n    if (job.jobprimaryskill) {\r\n      postPrimarySkill(job.jobprimaryskill);\r\n    }\r\n  }, [job.jobprimaryskill]);\r\n\r\n  const getJob = () => {\r\n    fetch(`/Jobs/List/${jobId}`)\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        setJob(data);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  const postPrimarySkill = (primarySkill) => {\r\n    fetch('/applicant/skills/', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({ skill: primarySkill }),\r\n    })\r\n      .then(response => {\r\n        if (!response.ok) {\r\n          return response.json().then(err => { throw err });\r\n        }\r\n        return response.json();\r\n      })\r\n      .then(data => {\r\n        setApplicantEmails(data.emails);\r\n      })\r\n      .catch(error => {\r\n        console.error('Error:', error);\r\n        alert('Failed to fetch applicant emails. Please try again.');\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"card\">\r\n      <div className=\"card-header\">{job.jobtitle} - Job at {job.companyname}</div>\r\n      <div className=\"card-body\">\r\n        <p className=\"card-text\">\r\n          Job Type: {job.jobtype}\r\n        </p>\r\n        <p className=\"card-text\">\r\n          Salary: Â£{job.salary}\r\n        </p>\r\n        <p className=\"card-text\">\r\n          Job Description: {job.jobdescription}\r\n        </p>\r\n        <p className=\"card-text\">\r\n          Location: {job.location}\r\n        </p>\r\n        <p className=\"card-text\">\r\n          Date listing was posted: {job.dateposted}\r\n        </p>\r\n        <p className=\"card-text\">\r\n          Deadline to apply: {job.deadline}\r\n        </p>\r\n        <p className=\"card-text\">\r\n          Sought skills: {job.jobprimaryskill}, {job.jobsecondaryskill}\r\n        </p>\r\n        <div className=\"applicants\">\r\n          <h5>Applicants with {job.jobprimaryskill} skill:</h5>\r\n          <ul>\r\n            {applicantEmails.map(email => (\r\n              <li key={email}>{email}</li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default JobDetails;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}